<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculador Zodíaco Chino</title>
    <style>
        /* Mantener los estilos CSS anteriores */
        :root {
            --primary: #2c3e50;
            --secondary: #e74c3c;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 1rem;
            background: #f8f9fa;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        /* ... (otros estilos iguales) ... */
    </style>
</head>
<body>
    <div class="container">
        <h1>Calculador Zodíaco Chino</h1>
        <form id="zodiacForm">
            <div class="input-group">
                <input type="date" id="birthdate" required>
                <button type="button" id="calculateBtn">Calcular</button>
            </div>
        </form>
        <div class="result" id="result">
            <h2 id="zodiac-title"></h2>
            <div class="zodiac-info">
                <div>
                    <p><strong>Año de:</strong> <span id="zodiac-animal"></span></p>
                    <p><strong>Nombre Chino:</strong> <span id="zodiac-chinese"></span></p>
                </div>
                <div class="compatibility">
                    <p><strong>Mejores compatibilidades:</strong> <span id="best-matches"></span></p>
                    <p><strong>Compatibilidades buenas:</strong> <span id="good-matches"></span></p>
                    <p><strong>Evitar:</strong> <span id="avoid-matches"></span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de años nuevos chinos (1900-2100)
        const chineseNewYears = {
            // Ejemplo de datos (lista completa en https://www.prokerala.com/general/calendar/chinese-new-year/)
            1997: '1997-02-07',
            1998: '1998-01-27',
            1999: '1999-02-16',
            2000: '2000-02-05',
            2001: '2001-01-24',
            2002: '2002-02-12',
            2003: '2003-02-01',
            2022: '2022-02-01',
            2023: '2023-01-22',
            2024: '2024-02-10',
            2025: '2025-01-29'
            // Agregar más fechas según necesidad
        };

        const zodiacData = [
            { // 0 - Rata
                animal: 'Rata',
                chinese: '鼠 (Shǔ)',
                best: ['Dragón', 'Mono'],
                good: ['Buey', 'Tigre', 'Conejo', 'Serpiente', 'Perro', 'Cerdo'],
                avoid: ['Caballo', 'Cabra']
            },
            { // 1 - Buey
                animal: 'Buey',
                chinese: '牛 (Niú)',
                best: ['Serpiente', 'Gallo'],
                good: ['Rata', 'Tigre', 'Conejo', 'Dragón', 'Mono', 'Cerdo'],
                avoid: ['Cabra', 'Caballo', 'Perro']
            },
            // ... (completar con los demás animales en orden)
        ];

        function getZodiac(selectedDate) {
            const year = selectedDate.getFullYear();
            const cnYearDate = new Date(chineseNewYears[year]);
            
            // Si la fecha es anterior al año nuevo chino, usar año anterior
            const zodiacYear = selectedDate < cnYearDate ? year - 1 : year;
            
            // Calcular índice (1984 fue año de la Rata)
            const zodiacIndex = (zodiacYear - 1984) % 12;
            return zodiacData[zodiacIndex >= 0 ? zodiacIndex : 12 + zodiacIndex];
        }

        function handleCalculation() {
            const dateInput = document.getElementById('birthdate').value;
            if (!dateInput) {
                alert('Por favor selecciona una fecha');
                return;
            }

            const selectedDate = new Date(dateInput);
            const zodiac = getZodiac(selectedDate);
            
            document.getElementById('result').style.display = 'block';
            document.getElementById('zodiac-title').textContent = `Zodíaco Chino: ${selectedDate.getFullYear()}`;
            document.getElementById('zodiac-animal').textContent = zodiac.animal;
            document.getElementById('zodiac-chinese').textContent = zodiac.chinese;
            document.getElementById('best-matches').textContent = zodiac.best.join(', ');
            document.getElementById('good-matches').textContent = zodiac.good.join(', ');
            document.getElementById('avoid-matches').textContent = zodiac.avoid.join(', ');
        }

        // Corregir el evento del botón
        document.getElementById('calculateBtn').addEventListener('click', handleCalculation);
    </script>
</body>
</html>